<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
    <link rel="stylesheet" href="style.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    
</head>
<body>
<nav class="navbar navbar-dark bg-light ">
        <!-- Navbar content -->
        <ul class="nav nav-tabs">
          <li class="nav-item">
              <a class="nav-link active" aria-current="page" style="color: brown" href="index.html">Food Ordering App</a>
            </li>
          <li class="nav-item">
            <a class="nav-link" href="index.html">Home</a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="login.html">Login</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="adminLogin.html">Admin</a>
            </li>
        </ul>
      </nav>
   
    <form id="form" onsubmit="login()">
   
        <h2 style="color:rgb(82, 119, 155)"><u>User Login</u></h2>
        <div class="reg_form">
            <label for="email">Email:</label>
            <input type="email" name="email" id="email" placeholder="Enter email" required autofocus>
        </div>
        <div class="reg_form">
            <label for="password">Password:</label>
            <input type="password" name="password" id="password" placeholder="Enter password" required>
        </div>
        <div class="reg_form">
            <button type="submit" class="btn btn-success">Login</button>
        </div>
        <div><a href="register.html">Click here to Register</a></div>
    </form>
   <!--<script src="login.js"></script>-->
  <script >
   function login(){
		event.preventDefault();
		let email = document.querySelector("#email").value;
		let password = document.querySelector("#password").value;
		console.log("email:",email);
		console.log("password:",password);
		
			let userObj = {userEmail: email, Password: password };
	        console.log(userObj); 
	        if (email.trim() == "" || !(email).includes("@gmail.com")) {
	            alert("invalid email");
	        }else if(password.trim()==""){
	        	alert("Invalid email/password");
	        }
	        else{
	        try{
			   const url="http://localhost:8080/FoodOrderingApp-web/UserLoginServlet?email="+email+"&password="+password;
			   fetch(url).then(res=>res.text()).then(res=>{
				console.log(res);
				if(res==1){
				  alert("Login successfull");
				  window.location.href = "homePage.html";
				}else{
					alert("Invalid Successfull");
				}
			});
			}
			catch(err){
		        alert(err);
			}
	        }
		}

		
   </script>
</body>
</html>