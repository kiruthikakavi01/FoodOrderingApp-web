<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <title>Food Ordering App</title>
        <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>
    <nav class="navbar navbar-dark bg-light  ">
        <!-- Navbar content -->
        <ul class="nav nav-tabs">
          <li class="nav-item">
              <a class="nav-link active" aria-current="page" style="color: brown" href="index.html">Food Ordering App</a>
            </li>
          <li class="nav-item">
            <a class="nav-link" href="index.html">Home</a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link" href="login.html">Login</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="adminLogin.html">Admin</a>
            </li>
        </ul>
      </nav>
    
    
    <form id="form" onsubmit="register()">
    <div>
        <h3 style="color:rgb(82, 119, 155)"><u>User SignUp</u></h3>
       <div class="reg_form">
           <label for="name">Name:</label>
           <input type="name" name="name" id="name" placeholder="Enter your name" required autofocus>
       </div>
       <div class="reg_form">
        <label for="email">Email:</label>
        <input type="email" name="email" id="email" placeholder="Enter your email" required>
    </div>
    <div class="reg_form">
        <label for="mobileNo">Contact Number:</label>
        <input type="tel" name="mobileNumber" id="mobileNumber" pattern="[0-9]{10}" placeholder="Enter your mobile No" minlength="10" maxlength="10" required>
    </div>
    <div class="reg_form">
        <label for="password">Password:</label>
        <input type="password" name="password" id="password" placeholder="Enter Password"minlength="8" maxlength="16" required>
    </div>
    <div class="reg_form">
        <label for="conform_password">Confirm Password:</label>
        <input type="password" name="conform_password" id="conform_password" placeholder="Enter Conform Password" minlength="8" maxlength="16" required>
    </div>
    
    <div class="reg_form">
        <button type="submit" class="btn btn-success">Submit</button>
        <button type="reset"  class="btn btn-danger">Reset</button>
    </div>
       
</div>
    </form>
   <!-- <script src="register.js"></script> --> 
    <script>
    function register() {

        event.preventDefault();
        let name = document.querySelector("#name").value;
        let email = document.querySelector("#email").value;
        let contactNumber = document.querySelector("#mobileNumber").value;
        let createPassword = document.querySelector("#password").value;
        let conformPassword = document.querySelector("#conform_password").value;
        console.log("name:", name);
        console.log("email:", email);
        console.log("Mobile No:", contactNumber);
        console.log("Password:", createPassword);
        console.log("Conform Password:", conformPassword);
        if (name == null || name.trim() == "") {
            alert("Invalid name");
        }
        else if (email.trim() == "" || !(email).includes("@gmail.com")) {
            alert("invalid email");
        }
       
        else if (conformPassword != createPassword) {
            alert("Invalid password");

        }
        else {

            let regObj = { userName: name, userEmail: email, userContactNo: contactNumber, userPassword: createPassword, userConformPassword: conformPassword };
            console.log(regObj);
            
            try{
            const url = "http://localhost:8080/FoodOrderingApp-web/RegisterServlet?name=" + name + "&email=" + email + "&contactNumber=" + contactNumber + "&createPassword=" + createPassword + "&conformPassword=" + conformPassword;
            fetch(url).then(res=> res.text()).then(res=> {
                //console.log(res);
                
                
                
                if(res==0){
    			alert("Register success");
                window.location.href = "login.html";
                }
              else{
    				alert("You are already Registered");
               }
            });
           
        }
          catch(err){
    	     alert("You are already Registered");
    }
        }
      
    }
    </script>
    
</body>
</html>